<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Premium Image to Text Converter</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #007BFF;
      --primary-glow: rgba(0, 123, 255, 0.3);
      --background-color: #101218;
      --surface-color: #191D24;
      --text-color: #E0E0E0;
      --text-muted-color: #888;
      --border-color: #2D3440;
      --shadow-color: rgba(0, 0, 0, 0.5);
      --success-color: #28a745;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--background-color);
      color: var(--text-color);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      width: 100%;
      max-width: 650px;
      padding: 2.5rem;
      background-color: var(--surface-color);
      border-radius: 24px;
      box-shadow: 0 15px 40px var(--shadow-color);
      border: 1px solid var(--border-color);
      animation: fadeIn 0.7s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(25px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    h1 {
      text-align: center;
      font-weight: 600;
      font-size: 2.5rem;
      color: #fff;
      margin-bottom: 0.5rem;
    }

    .subtitle {
        text-align: center;
        color: var(--text-muted-color);
        margin-bottom: 2.5rem;
        font-weight: 300;
    }

    .upload-section {
      background-color: rgba(0,0,0,0.2);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .upload-section:hover, .upload-section.drag-over {
      background-color: rgba(0, 123, 255, 0.05);
      border-color: var(--primary-color);
      box-shadow: 0 0 15px var(--primary-glow);
    }
    
    .upload-content p {
      margin: 1rem 0 0;
      font-size: 1rem;
      color: var(--text-muted-color);
    }
    
    .upload-content p span {
      font-weight: 500;
      color: var(--primary-color);
    }

    .upload-icon {
      font-size: 3rem;
      color: var(--primary-color);
      transition: transform 0.3s ease;
    }
    
    .upload-section:hover .upload-icon {
        transform: scale(1.1) translateY(-5px);
    }

    input[type="file"] {
      display: none;
    }

    #imagePreview {
        position: relative;
        margin-top: 1.5rem;
        display: none; /* Hidden by default */
    }

    #imagePreview img {
        max-width: 100%;
        max-height: 250px;
        border-radius: 10px;
        border: 1px solid var(--border-color);
    }

    #output-container {
        display: none; /* Hidden by default */
        margin-top: 2rem;
    }

    #output {
      margin-top: 1rem;
      background: var(--background-color);
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid var(--border-color);
      white-space: pre-wrap;
      min-height: 150px;
      font-family: 'Poppins', sans-serif;
      font-weight: 300;
      color: #ccc;
      transition: all 0.3s ease;
      line-height: 1.6;
    }

    .processing-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 1.2rem;
        min-height: 150px;
    }

    #progress-status {
        color: var(--text-muted-color);
        font-weight: 400;
    }
    
    .progress-bar-container {
        width: 100%;
        height: 8px;
        background-color: var(--border-color);
        border-radius: 4px;
        overflow: hidden;
    }
    
    #progress-bar {
        width: 0%;
        height: 100%;
        background-color: var(--primary-color);
        border-radius: 4px;
        transition: width 0.2s ease-out;
    }


    .copy-btn {
      display: none; /* Hidden by default */
      margin-top: 1.5rem;
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
    }

    .copy-btn:hover {
        background-color: #0069D9;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 123, 255, 0.2);
    }

    .copy-btn.copied {
        background-color: var(--success-color);
    }

    @media (max-width: 600px) {
      body { padding: 1rem; }
      .container { padding: 1.5rem; }
      h1 { font-size: 2rem; }
      .upload-section { padding: 1.5rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Image to Text</h1>
    <p class="subtitle">Extract text from any image instantly.</p>

    <div class="upload-section" id="uploadArea">
      <div id="uploadContent">
        <div class="upload-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-cloud-arrow-up-fill" viewBox="0 0 16 16">
            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z"/>
          </svg>
        </div>
        <p>Drag & Drop image here, or <span>click to browse</span></p>
      </div>
      <div id="imagePreview">
        <img id="previewImage" src="#" alt="Image Preview"/>
      </div>
      <input type="file" id="imageInput" accept="image/*" />
    </div>

    <div id="output-container">
        <h2>Extracted Text</h2>
        <div id="output"></div>
        <button class="copy-btn" id="copyBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
              <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
              <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
          </svg>
          <span id="copyBtnText">Copy Text</span>
        </button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script>
    const uploadArea = document.getElementById('uploadArea');
    const imageInput = document.getElementById('imageInput');
    const uploadContent = document.getElementById('uploadContent');
    const imagePreview = document.getElementById('imagePreview');
    const previewImage = document.getElementById('previewImage');
    const outputContainer = document.getElementById('output-container');
    const output = document.getElementById('output');
    const copyBtn = document.getElementById('copyBtn');
    const copyBtnText = document.getElementById('copyBtnText');

    // Trigger file input on click
    uploadArea.addEventListener('click', () => imageInput.click());
    
    // Drag and Drop events
    uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('drag-over');
    });

    uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('drag-over');
    });

    uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('drag-over');
        const file = e.dataTransfer.files[0];
        if (file) {
            handleImage(file);
        }
    });
    
    imageInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        handleImage(file);
      }
    });

    async function handleImage(file) {
        if (!file.type.startsWith('image/')) {
            alert('Please upload an image file.');
            return;
        }

        // Show image preview
        uploadContent.style.display = 'none';
        previewImage.src = URL.createObjectURL(file);
        imagePreview.style.display = 'block';

        // Show output container and set up processing UI
        outputContainer.style.display = 'block';
        output.innerHTML = `
            <div class="processing-container">
                <p id="progress-status">Initializing...</p>
                <div class="progress-bar-container">
                    <div id="progress-bar"></div>
                </div>
            </div>
        `;
        copyBtn.style.display = 'none';

        const progressBar = document.getElementById('progress-bar');
        const progressStatus = document.getElementById('progress-status');

        try {
            const worker = await Tesseract.createWorker({
                logger: m => {
                    if (m.status === 'recognizing text') {
                        const progress = (m.progress * 100).toFixed(2);
                        progressBar.style.width = progress + '%';
                        progressStatus.textContent = `Recognizing Text (${progress}%)`;
                    } else {
                        // Capitalize first letter for better display
                        progressStatus.textContent = m.status.charAt(0).toUpperCase() + m.status.slice(1) + '...';
                    }
                }
            });

            await worker.loadLanguage('eng');
            await worker.initialize('eng');
            const { data: { text } } = await worker.recognize(file);
            
            output.textContent = text || "No text could be extracted. Try a clearer image.";
            copyBtn.style.display = 'flex';
            resetCopyButton();

            await worker.terminate();
        } catch (err) {
            output.textContent = 'Error processing image. Please check the console and try again.';
            console.error(err);
        }
    }

    function resetCopyButton() {
        copyBtnText.textContent = 'Copy Text';
        copyBtn.classList.remove('copied');
    }

    copyBtn.addEventListener('click', () => {
      const text = output.textContent;
      navigator.clipboard.writeText(text).then(() => {
        copyBtnText.textContent = 'Copied!';
        copyBtn.classList.add('copied');
        setTimeout(resetCopyButton, 2500);
      });
    });
  </script>
</body>
</html>
